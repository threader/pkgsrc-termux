$NetBSD: patch-ah,v 1.3 2012/10/26 20:24:19 joerg Exp $

--- cfs_fh.c.orig	2012-10-26 13:15:56.000000000 +0000
+++ cfs_fh.c
@@ -289,7 +289,7 @@ doencrypt(k,s,l,salt,vect)
      cfskey *k;
      char *s;
      int l;
-     int salt;
+     u_long salt;
      char *vect;
 {
 	int i,j,smsize;
@@ -311,7 +311,7 @@ dodecrypt(k,s,l,salt,vect)
      cfskey *k;
      char *s;
      int l;
-     int salt;
+     u_long salt;
      char *vect;
 {
 	int i,j,smsize;
@@ -547,7 +547,9 @@ fhtofd(f,mode)
 		openfd=NULL;
 	}
 
+#if 0
 	if (mode==0) { mode=CFS_WRITE; }
+#endif
 	/* Phil Karn's hack for R/O file systems */
 	if ((fd=open(f->name,mode,0))<0 && errno == EROFS) {
 		mode = CFS_READ;        /* Force read and try again */
@@ -618,7 +620,7 @@ closeout(f)
 	}
 }
 
-closeall()
+void closeall(void)
 {
 	if (openfd!=NULL) {
 		if (curfd>=0)
