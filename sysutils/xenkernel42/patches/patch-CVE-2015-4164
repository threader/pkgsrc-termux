$NetBSD: patch-CVE-2015-4164,v 1.1 2015/08/23 16:17:12 spz Exp $

patch for CVE-2015-4164 aka XSA-136 from
http://xenbits.xen.org/xsa/xsa136.patch

--- xen/arch/x86/x86_64/compat/traps.c.orig	2014-09-02 06:22:57.000000000 +0000
+++ xen/arch/x86/x86_64/compat/traps.c
@@ -114,7 +114,7 @@ unsigned int compat_iret(void)
         }
         else if ( ksp > regs->_esp )
         {
-            for (i = 9; i > 0; ++i)
+            for ( i = 9; i > 0; --i )
             {
                 rc |= __get_user(x, (u32 *)regs->rsp + i);
                 rc |= __put_user(x, (u32 *)(unsigned long)ksp + i);
